{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }} - Portal de Mascotas</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'solicitud_adopcion/css/solicitudes.css' %}">
</head>
<body>
    <div class="solicitudes-container">
        <div class="solicitudes-header">
            <h1 class="solicitudes-title">{{ titulo }}</h1>
            <p class="solicitudes-subtitle">Detalle de la solicitud de adopción</p>
        </div>

        <div class="solicitudes-actions">
            <a href="{% url 'solicitud_adopcion:lista_solicitudes' %}" class="btn-solicitud btn-solicitud-secondary">← Volver a Lista</a>
            <a href="{% url 'dashboard' %}" class="btn-solicitud btn-solicitud-secondary">🏠 Dashboard</a>
        </div>

        <div class="solicitud-detail">
            <div class="solicitud-detail-header">
                <h2 class="solicitud-detail-title">Solicitud #{{ solicitud.id }}</h2>
                <span class="estado-solicitud estado-{{ solicitud.estado }}">{{ solicitud.get_estado_display }}</span>
            </div>
            
            <div class="solicitud-detail-content">
                <div class="solicitud-info">
                    <div class="solicitud-field">
                        <span class="solicitud-label">Fecha de Solicitud</span>
                        <span class="solicitud-value">{{ solicitud.fecha_solicitud|date:"d/m/Y H:i" }}</span>
                    </div>
                    {% if solicitud.fecha_respuesta %}
                    <div class="solicitud-field">
                        <span class="solicitud-label">Fecha de Respuesta</span>
                        <span class="solicitud-value">{{ solicitud.fecha_respuesta|date:"d/m/Y H:i" }}</span>
                    </div>
                    {% endif %}
                </div>

                <div class="mascota-preview">
                    <h4>🐕 Información de la Mascota</h4>
                    <p><strong>Nombre:</strong> {{ solicitud.mascota.nombre }}</p>
                    <p><strong>Tipo:</strong> {{ solicitud.mascota.get_tipo_display }}</p>
                    <p><strong>Raza:</strong> {{ solicitud.mascota.raza }}</p>
                    <p><strong>Edad:</strong> {{ solicitud.mascota.edad }} meses</p>
                    <p><strong>Sexo:</strong> {{ solicitud.mascota.get_sexo_display }}</p>
                    <p><strong>Ubicación:</strong> {{ solicitud.mascota.ubicacion }}</p>
                    <p><strong>Descripción:</strong> {{ solicitud.mascota.descripcion }}</p>
                    <p><strong>Responsable:</strong> {{ solicitud.mascota.responsable.username }}</p>
                </div>

                <div class="mascota-preview">
                    <h4>👤 Información del Solicitante</h4>
                    <p><strong>Usuario:</strong> {{ solicitud.usuario.username }}</p>
                    <p><strong>Email:</strong> {{ solicitud.usuario.email|default:"No proporcionado" }}</p>
                    <p><strong>Fecha de Registro:</strong> {{ solicitud.usuario.date_joined|date:"d/m/Y" }}</p>
                </div>

                <div class="mascota-preview">
                    <h4>💬 Mensaje de Solicitud</h4>
                    <p>{{ solicitud.mensaje }}</p>
                </div>

                {% if solicitud.respuesta %}
                <div class="mascota-preview">
                    <h4>📝 Respuesta del Responsable</h4>
                    <p>{{ solicitud.respuesta }}</p>
                </div>
                {% endif %}

                <div class="solicitud-actions">
                    {% if user == solicitud.mascota.responsable and solicitud.estado == 'pendiente' %}
                        <a href="{% url 'solicitud_adopcion:responder_solicitud' solicitud.id %}" class="btn-solicitud btn-solicitud-success">📝 Responder Solicitud</a>
                    {% endif %}
                    
                    {% if user == solicitud.usuario and solicitud.estado == 'pendiente' %}
                        <a href="#" class="btn-solicitud btn-solicitud-secondary" onclick="alert('Para cancelar tu solicitud, contacta al responsable de la mascota.')">❌ Cancelar Solicitud</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</body>
</html>
